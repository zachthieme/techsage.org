box: ruby
build:
    # Steps make up the actions in your pipeline
    # Read more about steps on our dev center:
    # http://devcenter.wercker.com/docs/steps/index.html
    steps:
        - bundle-install
        - script:
            name: generate site
            code: bundle exec jekyll build --trace
        - script:
          name: check files
          code: |
            ls /pipeline/source/_site/Post
        - script:
          name: check sitemap
          code: |
            cat /pipeline/source/_site/sitemap.xml
deploy:
  steps:
    - s3sync:
        key-id: $KEY
        key-secret: $SECRET
        bucket-url: $URL
